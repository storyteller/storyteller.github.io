<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
				<link rel=icon href=/content/images/favicon.ico>
		<title>Storyteller - Working with the Fixture Markdown</title>
		<link href="/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="/content/storyteller.css" rel="stylesheet" type="text/css" />
		<link href="/content/prism.css" rel="stylesheet" type="text/css" />
		<link href="/content/theme.css" rel="stylesheet" type="text/css" />




        <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />

        <!-- CSS code from Bootply.com editor -->
        <link href="/content/affix.css" rel="stylesheet" type="text/css" />
    </head>

    <!-- HTML code from Bootply.com editor -->

    <body  >


        <nav class="navbar navbar-default navbar-fixed-top" role="banner">
		  <div class="container">
		    <div class="navbar-header">
		      <a href="/" class="navbar-brand">Storyteller</a>
		    </div>
		    <nav class="collapse navbar-collapse" role="navigation">
		      <ul class="nav navbar-nav pull-right">
            <li>
              <a href="/tutorial">Tutorial</a>
            </li>
		        <li>
		          <a href="/documentation/getting_started">Getting Started</a>
		        </li>
		        <li>
		          <a href="/documentation">Documentation</a>
		        </li>
		        <li>
		        <li>
<a href="https://gitter.im/storyteller/storyteller?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/storyteller/storyteller" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a>
		        </li>
		      	<li><a href="/documentation/language" title="Crafting the Specification Language">Previous</a></li>
		      	<li><a href="/documentation/language/markdown" title="Working with the Specification Markdown">Next</a></li>
		      </ul>
      <div class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input id="search" type="search" class="form-control" placeholder="Search">
        </div>
      </div>

		    </nav>

		  </div>
		</nav>

		  <div class="container">
		  	<nav class="navbar-inverse">
		  		<ol class="breadcrumb"><li><a href="/">Storyteller</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/documentation/language">Crafting the Specification Language</a></li><li class="active">Working with the Fixture Markdown</li></ol>
		  	</nav>
		  </div>

		<!--main-->
		<div class="container">
			<div class="row">
		      <!--left-->

		      <div class="col-md-3" id="leftCol">
		      	<h3>Storyteller 4.1.0</h3>
		      	<br />

				<ul class="nav nav-stacked affix" id="sidebar">

		        </ul>

		        	<h3 class="no-margin">Next</h3><p><a href="/documentation/language/markdown">Working with the Specification Markdown</a></p>
		        	<h3 class="no-margin">Previous</h3><a href="/documentation/language">Crafting the Specification Language</a></p>

		        </ul>
		      </div><!--/left-->

		      <!--right-->
		      <div class="col-md-9">
			      	<h1>Working with the Fixture Markdown<a href="https://github.com/storyteller/storyteller/blob/master/documentation/documentation/language/fixturemarkdown.md"  class="text-muted small pull-right" style="margin-top: 10px"><i class="fa fa-github"></i> Edit on GitHub</a></h1>

			      	<hr />

			      	<div id="main-pane">
			      		<!--title: Working with the Fixture Markdown-->
<p>A big new feature and capability in Storyteller 4.0 is the ability to design your <a href="/documentation/engine/fixtures">Fixtures</a> language in pure
<a href="http://daringfireball.net/projects/markdown/">markdown text</a>. The Fixture markdown files can either model all new fixtures or grammars, or override how already
coded grammars are rendered in preview and results views and how they are edited. Effectively, this gives developers
a way to keep the actual Fixture code cleaner by moving things like selection lists and titles out of the C# code.</p>
<p>You can:</p>
<ul>
<li>Define Fixture's with markdown files and author specifications in the editing tool without having to write any code first</li>
<li>Use the Fixture markdown files to override how already coded grammars are rendered and edited to achieve more human readable specifications</li>
<li>From the <a href="/documentation/ui/fixtures">Fixtures and Grammars</a> page, you can generate skeleton code for any
grammars that are not yet implemented</li>
<li>Export Fixture markdown files from the existing code</li>
</ul>
<h2 id="fixture-markdown-files">Fixture Markdown Files</h2>
<p>The Fixture markdown files are persisted in the <code>/Fixtures</code> folder directly under your project root directory with the <code>*.md</code>
file extension.</p>
<p>Say you have a Fixture class like this one:</p>
<pre><code class="language-csharp">&#xD;&#xA;public class SimpleFixture : Fixture&#xD;&#xA;{&#xD;&#xA;    public SimpleFixture()&#xD;&#xA;    {&#xD;&#xA;        Title = &quot;This is the title that will be shown in the specs&quot;;&#xD;&#xA;    }&#xD;&#xA;}&#xD;&#xA;</code></pre>
<p>The naming convention for the files is [Fixture key].md, so if you exported the markdown for the Fixture above, you'd get the following in a file named
<code>Simple.md</code> like this:</p>
<pre><code># This is the title that will be shown in the specs
</code></pre>
<p>The title of the Fixture that's shown in the section headers of the rendered specification can be specified by a markdown
H1 element like: <code># your title</code> on the first line of the markdown file. This element is optional and will just default to the key of
the Fixture class (&quot;Simple&quot;);</p>
<h2 id="declaring-grammars">Declaring Grammars</h2>
<div class="alert alert-success"><b>Note!</b> This feature was designed first and foremost to enable human
editing of these markdown files, so many details are completely optional.</div>
<p>Let's say that we have a Fixture with the key &quot;Calculator.&quot; You might have a grammar to specify the starting number in the main
calculator window. In markdown, that would look something like:</p>
<pre><code>## StartWith
### Start with {number}
</code></pre>
<p>If you previewed the &quot;missing&quot; code for that Fixture in the <a href="/documentation/ui/fixtures">Fixtures and Grammars</a> page,
you'd see generated code like this:</p>
<pre><code class="language-csharp">&#xD;&#xA;public class CalculatorFixture : StoryTeller.Fixture&#xD;&#xA;{&#xD;&#xA;    public void StartWith(string number)&#xD;&#xA;    {&#xD;&#xA;        throw new System.NotImplementedException();&#xD;&#xA;    }&#xD;&#xA;}&#xD;&#xA;</code></pre>
<p>A couple notes about the markdown and the generated code:</p>
<ul>
<li>The <code>##</code> header is read as the key of a <a href="/documentation/engine/grammars">grammar</a></li>
<li>The <code>###</code> header is considered to be title or textual format in the case of <a href="/documentation/engine/grammars/sentences">Sentences</a> grammars that is used to rendered
the grammar in visualizations of the specification. It's the equivalent to using the <code>[FormatAs(&quot;Start with {number}&quot;)]</code>
attribute in the C# code for the Fixture.</li>
<li>It's possible to leave all the details about rendering the grammar in the markdown file and omit that from
the Fixture code (notice that there's no <code>[FormatAs(&quot;&quot;)]</code> usage in the code sample above)</li>
<li>If the <code>###</code> title/header/format is omitted, Storyteller infers the title by splitting the grammar key by <a href="http://wiki.c2.com/?PascalCase">Pascal case</a>,
so if you only had the line <code>## PressTheEnterKey</code>, the derived title/header/format would be &quot;Press The Enter Key&quot;</li>
<li>If the <code>##</code> grammar key is omitted, Storyteller will derive the grammar key by effectively reversing the transformation in the previous bullet point. so
if you only had the line <code>### Press the enter key</code>, the grammar key is derived as &quot;PressTheEnterKey.&quot;</li>
</ul>
<p>All grammars have to start with either the <code>##</code> or <code>###</code> headers in the markdown file. The default grammar type is to be a Sentence, but there is
additional syntax to define other types of grammars.</p>
<h2 id="cell-behavior">Cell Behavior</h2>
<div class="alert alert-success"><b>Note!</b> You don't have to make the pipe bar characters line up, but I formatted it all nice and neat for the docs;)</div>
<p><a href="/documentation/engine/cells">Cells</a> are the inputs to grammars. The markdown syntax allows you to control all of the options
for how individual cells are handled in the specification rendering and editing. The previous section demonstrates the simplest way to define a
Sentence grammar in markdown. Now, let's define a default value of &quot;5&quot; for the <code>number</code> cell from the <code>StartWith</code> sample:</p>
<pre><code>## StartWith
### Start with {number}
|sentence|number|
|default |5     |
</code></pre>
<p>When Storyteller sees a markdown pipe bar table, it parses the table with the following rules:</p>
<ul>
<li>The first column of the first row declares what the type of grammar is with the valid values being: &quot;sentence&quot;, &quot;table&quot;, &quot;set&quot;, or &quot;ordered-set&quot;_</li>
<li>Any additional columns in the first row designate the &quot;cell&quot; within the grammar.</li>
<li>Subsequent rows start with the cell property name: &quot;default&quot;, &quot;header&quot;, &quot;options&quot;, &quot;editor&quot;, &quot;result&quot;. The values in the columns to the right apply
to the cells</li>
</ul>
<p>Here's an example of controlling the header values for a Table grammar:</p>
<pre><code>## decisions
### decisions
|table  |FirstName |LastName |FullName |LastNameFirst|
|header |First Name|Last Name|Full Name|Last, First  |
</code></pre>
<p><strong>Do note that cell names cannot have any spaces. Think &quot;valid C# variable names&quot; here.</strong></p>
<p>To specify option values in a cell, you can either do something like this:</p>
<pre><code>## PlayerPositionIs
|table  |name|position      |
|options|    |LB, QB, RB, WR|
</code></pre>
<p>In the case above, the &quot;position&quot; cell in the &quot;PlayerPositionIs&quot; grammar would be edited with a
dropdown box in the editor with the options &quot;LB&quot;, &quot;QB&quot;, &quot;RB&quot;, and &quot;WR.&quot; If you want key/display
type semantics, you can use this syntax:</p>
<pre><code>## PlayerPositionIs
|table  |name|position                                                        |
|options|    |Linebacker=LB, Quarterback=QB, Running Back=RB, Wide Receiver=WR|
</code></pre>
<p><strong>Note that blank cells in the pipe bar table are ignored</strong></p>
<p>To override the choice of editor: &quot;text&quot; is the default, &quot;boolean&quot;, &quot;bigtext&quot; or &quot;big-text&quot;, and &quot;select&quot; is inferred
for you if you have any options for that cell. An example is:</p>
<pre><code>## ThisFactIs
### This fact should be {istrue}
|sentence|istrue |
|editor  |boolean|
</code></pre>
<p>Finally, <strong>strictly to aid the code generation</strong>, you can optionally define which cells
should be treated as expected results:</p>
<pre><code>## Adding
### Adding {x} to {y} should be {returnValue}
|sentence|x    |y    |returnValue|
|result  |false|false|true       |
</code></pre>
<p>The default is &quot;false.&quot; The generated code would be:</p>
<pre><code class="language-csharp">&#xD;&#xA;[return: StoryTeller.AliasAs(&quot;sum&quot;)]&#xD;&#xA;public string AddNumbers(string x, string y)&#xD;&#xA;{&#xD;&#xA;    throw new System.NotImplementedException();&#xD;&#xA;}&#xD;&#xA;</code></pre>
<p>If there is more than one result cell, Storyteller will use &quot;out&quot; parameters instead of a return value.</p>
<h2 id="sentence-grammars">Sentence Grammars</h2>
<p><a href="/documentation/engine/grammars/sentences">Sentences</a> are described by the pattern:</p>
<pre><code>## Key
### Format
|sentence|cell1|cell2        |
|default |     |default value|
</code></pre>
<p>Do note that only one of the <code>##</code> or <code>###</code> headers is mandatory, and the pipe bar table for cell overrides
is completely optional.</p>
<h2 id="fact-grammars">Fact Grammars</h2>
<p>Fact grammars are defined in markdown with this syntax:</p>
<pre><code>## TheConfirmationEmailWasSent
### The confirmation email was sent
fact
</code></pre>
<p>The presence of the line &quot;fact&quot; right underneath the key and title tells Storyteller to treat this as a &quot;Fact&quot; grammer.</p>
<p>The generated code would be:</p>
<pre><code class="language-csharp">&#xD;&#xA;public bool TheConfirmationEmailWasSent()&#xD;&#xA;{&#xD;&#xA;    throw new System.NotImplementedException();&#xD;&#xA;}&#xD;&#xA;</code></pre>
<h2 id="table-grammars">Table Grammars</h2>
<p>To design a <a href="/documentation/engine/grammars/tables">Table grammar</a>, use this markdown syntax:</p>
<pre><code>## NumberTable
### Adding some numbers together
|table |x    |y    |sum |product|
|header|X    |Y    |X+Y |X*Y    |
|result|false|false|true|true   |
</code></pre>
<p>That will generate a table grammar that will look like this in the specifications:</p>
<p>|X  |Y  |X+Y|X*Y|
|5  |5  |10 |25 |
|2  |3  |5  |6  |</p>
<p>The generated code for the grammar above would be:</p>
<pre><code class="language-csharp">&#xD;&#xA;[StoryTeller.Grammars.Tables.ExposeAsTable(&quot;Adding some numbers together&quot;)]&#xD;&#xA;public void NumberTable(string x, string y, out string sum, out string product)&#xD;&#xA;{&#xD;&#xA;    throw new System.NotImplementedException();&#xD;&#xA;}&#xD;&#xA;</code></pre>
<h2 id="set-verifications">Set Verifications</h2>
<p><a href="/documentation/engine/grammars/sets">Set Verification grammars</a> are defined just like Table's in the section above,
but the top left cell would read either &quot;set&quot; or &quot;ordered-set&quot; depending on the grammar.</p>
<p>An example would be:</p>
<pre><code>## PrimeNumbers
## The first 5 prime numbers should be
|ordered-set|number|
</code></pre>
<p>Which would result in this skeleton code:</p>
<pre><code class="language-csharp">&#xD;&#xA;// Implementation of a SetVerification grammar for &#x27;TheFirst5PrimeNumbersShouldBe&#x27;&#xD;&#xA;public class TheFirst5PrimeNumbersShouldBeRow&#xD;&#xA;{&#xD;&#xA;    public string number{get; set;}&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;private IEnumerable&lt;TheFirst5PrimeNumbersShouldBeRow&gt; getTheFirst5PrimeNumbersShouldBeRows(StoryTeller.ISpecContext context)&#xD;&#xA;{&#xD;&#xA;    throw new System.NotImplementedException();&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;public StoryTeller.IGrammar TheFirst5PrimeNumbersShouldBe()&#xD;&#xA;{&#xD;&#xA;    return VerifySetOf(getTheFirst5PrimeNumbersShouldBeRows)&#xD;&#xA;        .Titled(&quot;The first 5 prime numbers should be&quot;).Ordered()&#xD;&#xA;        .MatchOn(x =&gt; x.number);&#xD;&#xA;}&#xD;&#xA;</code></pre>
<p><em>I know the code above is ugly as sin, but hey, it's better than having to write it all out by hand!</em></p>
<h2 id="embedded-sections">Embedded Sections</h2>
<p>This one is easy. <a href="/documentation/engine/grammars/embedded_section">Embedded Section grammars</a> can be defined as just:</p>
<pre><code>## DoSomeMath
### Now do some math
embeds Math
</code></pre>
<p>This would be interpreted as an embedded section with the key &quot;DoSomeMath&quot; that embeds
the &quot;Match&quot; Fixture.</p>
<h2 id="paragraph-grammars">Paragraph Grammars</h2>
<p><em>The Storyteller team recommends that you use this feature sparingly just because of the extra complexity it involves.</em></p>
<p>To build a <a href="/documentation/engine/grammars/paragraphs">Paragraph grammar</a> in markdown, you define the child
grammars as an <code>*</code> bullet list, with any cell overrides in a table directly underneath the child declaration:</p>
<pre><code>## Key
### Title of your paragraph
* First child grammar title/format/# text
|table|column1|column2|
* Second child grammar
* Third child grammar
</code></pre>
<p>Storyteller can generate code for the paragraph grammar itself, and the child grammars as <code>[Hidden]</code> grammars.</p>

			      	</div>

			      	<hr />

			      	<nav>
				        <span>
				        	<strong>Previous: </strong><a href="/documentation/language">Crafting the Specification Language</a>

				        </span>
				        <span class="pull-right">

				        	<strong>Next: </strong><a href="/documentation/language/markdown">Working with the Specification Markdown</a>

				        </span>
			      	</nav>

		      </div><!--/right-->
		  	</div><!--/row-->
		</div><!--/container-->

<script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$('#search').keyup(function(e){
  if(e.keyCode == 13) {
    var search = $('#search').val();

    var url = 'https://www.google.com/#q=site:storyteller.github.io ' + search;
    url = encodeURI(url);

    //alert(url);

    window.location.href = url;

    e.stopPropagation();
    if (e.cancelBubble!=null) e.cancelBubble = true;
    return false;
  }



});

</script>
    </body>


    <foot>
        <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type='text/javascript' src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <script type="text/javascript" src="/content/embed.js"></script>
        <script type="text/javascript" src="/content/prism.js"></script>
        <script type="text/javascript" src="/content/sidebar.js"></script>
        <script type="text/javascript" src="/content/affix.js"></script>
    </foot>
</html>
