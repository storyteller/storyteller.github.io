<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
				<link rel=icon href=/content/images/favicon.ico>
		<title>Storyteller - Getting Started</title>
		<link href="/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="/content/storyteller.css" rel="stylesheet" type="text/css" />
		<link href="/content/prism.css" rel="stylesheet" type="text/css" />
		<link href="/content/theme.css" rel="stylesheet" type="text/css" />




        <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />

        <!-- CSS code from Bootply.com editor -->
        <link href="/content/affix.css" rel="stylesheet" type="text/css" />
    </head>

    <!-- HTML code from Bootply.com editor -->

    <body  >


        <nav class="navbar navbar-default navbar-fixed-top" role="banner">
		  <div class="container">
		    <div class="navbar-header">
		      <a href="/" class="navbar-brand">Storyteller</a>
		    </div>
		    <nav class="collapse navbar-collapse" role="navigation">
		      <ul class="nav navbar-nav pull-right">
            <li>
              <a href="/tutorial">Tutorial</a>
            </li>
		        <li>
		          <a href="/documentation/getting_started">Getting Started</a>
		        </li>
		        <li>
		          <a href="/documentation">Documentation</a>
		        </li>
		        <li>
		        <li>
<a href="https://gitter.im/storyteller/storyteller?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/storyteller/storyteller" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a>
		        </li>
		      	<li><a href="/documentation" title="Documentation">Previous</a></li>
		      	<li><a href="/documentation/converting" title="Converting from Storyteller 3.0 to 4.0">Next</a></li>
		      </ul>
      <div class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input id="search" type="search" class="form-control" placeholder="Search">
        </div>
      </div>

		    </nav>

		  </div>
		</nav>

		  <div class="container">
		  	<nav class="navbar-inverse">
		  		<ol class="breadcrumb"><li><a href="/">Storyteller</a></li><li><a href="/documentation">Documentation</a></li><li class="active">Getting Started</li></ol>
		  	</nav>
		  </div>

		<!--main-->
		<div class="container">
			<div class="row">
		      <!--left-->

		      <div class="col-md-3" id="leftCol">
		      	<h3>Storyteller 4.4.0</h3>
		      	<br />

				<ul class="nav nav-stacked affix" id="sidebar">

		        </ul>

		        	<h3 class="no-margin">Next</h3><p><a href="/documentation/converting">Converting from Storyteller 3.0 to 4.0</a></p>
		        	<h3 class="no-margin">Previous</h3><a href="/documentation">Documentation</a></p>

		        </ul>
		      </div><!--/left-->

		      <!--right-->
		      <div class="col-md-9">
			      	<h1>Getting Started<a href="https://github.com/storyteller/storyteller/blob/master/documentation/documentation/getting_started.md"  class="text-muted small pull-right" style="margin-top: 10px"><i class="fa fa-github"></i> Edit on GitHub</a></h1>

			      	<hr />

			      	<div id="main-pane">
			      		<!--Title:Getting Started-->
<!--Url:getting_started-->
<div class="alert alert-success" role="alert"><strong>Storyteller runs everywhere now!</strong> Storyteller 4.0 supports the CoreCLR and now runs on Mac OSX or any other operating system that has
CoreCLR support.
</div>
<div class="alert alert-info" role="alert"><strong>Note!</strong> Storyteller 4.0 fully embraces the new dotnet CLI with an additional package for
using Storyteller 4.0 with "classic" csproj files. There is a separate section for information about using Storyteller 3.0 as the setup steps
have changed</div>
<p>This document describes how to install and intialize your Storyteller specfication project. For more specific documentation, see:</p>
<ul>
<li><a href="/documentation/using/ci">Integration with Continuous Integration</a></li>
<li><a href="/documentation/ui">The Specification Editor and Interactive Runner</a></li>
</ul>
<p>If you prefer to just see working code, take a look at the <a href="https://github.com/storyteller/quickstarts">Storyteller Quickstart repository</a> to see minimal
Storyteller setups for projects using the <a href="https://docs.microsoft.com/en-us/dotnet/articles/core/tools/">dotnet CLI</a> or .Net 4.6 projects using the classic *.csproj file format.</p>
<p>You can also find Storyteller 4 used in these open source projects:</p>
<ul>
<li><a href="https://github.com/JasperFx/marten">Marten</a></li>
<li><a href="https://github.com/JasperFx/alba">Alba</a></li>
</ul>
<p>In all cases, Storyteller consists of two logical parts:</p>
<ol>
<li>The actual Storyteller library you need to reference in order to write specifications</li>
<li>A command line tool that runs Storyteller specifications and provides the interactive specification website tool
(ST.exe in 3.0, <code>dotnet storyteller</code> in 4.0, or <code>StorytellerRunnerCsProj</code> for 4.0 + classic csproj files).</li>
</ol>
<h2 id="storyteller-4.0">Storyteller 4.0</h2>
<div class="alert alert-info" role="alert"><strong>Note!</strong> This section applies to .Net projects that use either project.json 
project files or the new MSBuild file formats with Visual Studio 2017. This section will not apply to projects that use the original
*.csproj build system. 
</div>
<p>If your codebase has supports the new dotnet cli, the setup steps are to:</p>
<ol>
<li>Create a new <strong>console application</strong> project for the Storyteller specifications in your solution</li>
<li>Install the <code>Storyteller</code> Nuget as a dependency</li>
<li>Add the <code>dotnet-storyteller</code> Nuget as a CLI tool extension</li>
<li>In the <code>Program.Main()</code> entry point of your Storyteller specification project, use the <code>StorytellerAgent</code> class to connect
your system under test to the Storyteller engine with code like this:</li>
</ol>
<pre><code class="language-csharp">&#xA;public static class Program&#xA;{&#xA;    public static void Main(string[] args)&#xA;    {&#xA;        // If you do not need a custom ISystem&#xA;        StorytellerAgent.Run(args);&#xA;    }&#xA;}&#xA;</code></pre>
<p>For more complex <a href="https://en.wikipedia.org/wiki/System_under_test">system under test's</a>, you will probably want to use a custom <code>ISystem</code> like this:</p>
<pre><code class="language-csharp">&#xA;public static class Program&#xA;{&#xA;    public static void Main(string[] args)&#xA;    {&#xA;        DateTime time = DateTime.MinValue;&#xA;        DateTime.TryParse(&quot;anything&quot;, out time);&#xA;        Console.WriteLine(time);&#xA;&#xA;        DependencyContext.Default.RuntimeLibraries.Each(x =&gt;&#xA;        {&#xA;            Console.WriteLine($&quot;{x.Name}: {x.Version}&quot;);&#xA;        });&#xA;&#xA;&#xA;        // GrammarSystem is a custom ISystem&#xA;        // that &quot;knows&quot; how to bootstrap and&#xA;        // gracefully shut down the system under test&#xA;        StorytellerAgent.Run(args, new GrammarSystem());&#xA;    }&#xA;}&#xA;</code></pre>
<p>See <a href="/documentation/engine/system_under_test">Connecting Storyteller to your System</a> for more information.</p>
<p>There is a <a href="https://github.com/storyteller/quickstarts/tree/master/dotnet-cli">sample quickstart project on GitHub</a> that shows a
minimal Storyteller setup for the new dotnet CLI mechanism.</p>
<p>Using the csproj format [*.csproj]</p>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp1.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Storyteller" Version="*"/>
    <PackageReference Include="dotnet-storyteller" Version="*"/>
    <DotNetCliToolReference Include="dotnet-storyteller" Version="*" />
  </ItemGroup>
</Project>
<p>The <a href="https://github.com/storyteller/quickstarts/blob/master/dotnet-cli/project.json">project.json</a> file
for that project is this:</p>
<pre><code>{
  &quot;version&quot;: &quot;1.0.0-*&quot;,
  &quot;buildOptions&quot;: {
    &quot;emitEntryPoint&quot;: true
  },

  &quot;dependencies&quot;: {
    &quot;Storyteller&quot;: &quot;4.0.0-alpha-463&quot;
  },

  &quot;tools&quot;: {
    &quot;dotnet-storyteller&quot;: {
      &quot;version&quot;: &quot;1.0.0-alpha-463&quot;,
      &quot;imports&quot;: [ &quot;dnxcore50&quot; ]
    }
  },

  &quot;frameworks&quot;: {
    &quot;net46&quot;: {},
    &quot;netcoreapp1.0&quot;: {
      &quot;dependencies&quot;: {
        &quot;Microsoft.NETCore.App&quot;: {
          &quot;type&quot;: &quot;platform&quot;,
          &quot;version&quot;: &quot;1.0.1&quot;
        }
      },
      &quot;imports&quot;: &quot;dnxcore50&quot;
    }
  }
}
</code></pre>
<p>Once the steps above are complete, you're ready to start writing <a href="/documentation/engine/fixtures">Fixtures</a> and specifications. To launch the Storyteller
specification runner, open up the command prompt tool of your choice, change the directory to the root of your Storyteller specification project,
and type <code>dotnet storyteller open</code> and go to town.</p>
<p>See <a href="/documentation/using/ci">Integration with Continuous Integration</a> for more information on using <code>dotnet storyteller</code>.</p>
<h2 id="storyteller-4.0-with-classic-msbuild-projects">Storyteller 4.0 with &quot;classic&quot; MSBuild Projects</h2>
<p>You can still use Storyteller 4.0 without the dotnet CLI. In this case, the setup steps are to:</p>
<ol>
<li>Create a new class library for your Storyteller specifications</li>
<li>Install the <code>Storyteller</code> 4.* Nuget to your new project</li>
<li>Install the <code>StorytellerRunnerCsproj</code> Nuget <em>somewhere</em> in your solution</li>
<li>Optionally, you may want to add a script of some sort to delegate to the executable
distributed in <code>StorytellerRunnerCsproj</code> Nuget package like this one:</li>
</ol>
<pre><code>packages\StorytellerRunnerCsproj.4.0.0.463\tools\StorytellerRunner.exe %* --app-domain
</code></pre>
<p>So that you can issue commands like:</p>
<pre><code># Open the Storyteller editor website tool
storyteller open

# Run the specifications from the command line
storyteller run
</code></pre>
<p><strong>Do note that the --app-domain flag is mandatory in order to use Storyteller 4.0 without the dotnet CLI.</strong></p>
<h2 id="storyteller-3.0">Storyteller 3.0</h2>
<p><a href="http://nuget.org/packages/storyteller">Storyteller 3 is <strong>only</strong> distributed via Nuget</a>. Storyteller 3.* only supports classic <em>.csproj projects
targetting .Net 4.6. To set up a Storyteller 3.</em> specification project:</p>
<ol>
<li>Create a new <strong>class library</strong> project -- if you opt for a separate project. I frequently reuse the unit testing library for Storyteller specifications
just to avoid creating additional projects</li>
<li>Add a reference to the Storyteller 3.0 Nuget to that project</li>
<li><strong>Optionally</strong>, you can add a custom <a href="/documentation/engine/system_under_test">ISystem</a> to your Storyteller specification project. You don't
need to do anything explicitly to get Storyteller to pick it up if there is only one <code>ISystem</code> class in the codebase. You can override the choice of ISystem used
through a command line switch.</li>
<li>Assuming that you are using Nuget for package management, you might want to add a small script to delegate to the Storyteller command line
tooling like this little Windows batch file:</li>
</ol>
<pre><code>packages\Storyteller.3.0.1\tools\ST.exe %*
</code></pre>
<p>So that you can issue commands like:</p>
<pre><code># Open the Storyteller editor website tool
storyteller open

# Run the specifications from the command line
storyteller run
</code></pre>
<p>Your script will vary from what's above based on your version of Storyteller and the path to your exploded Nuget packages. Protip: the Storyteller team
thinks that <a href="https://fsprojects.github.io/Paket/">Paket</a> makes this set up simpler.</p>
<div class="alert alert-info" role="alert"><strong>Note!</strong> Storyteller 3.0 is a little more intelligent in how it creates the <code>AppDomain</code> for execution. It is no longer necessary to copy the <code>*.config</code> file to the output directory for the configuration file to be picked up by Storyteller. You're welcome Andrew.
</div>
<p>Unless you specify the configuration file name explicitly with <code>st run --config [file name]</code>, Storyteller determines the configuration file for the execution <code>AppDomain</code> by first looking for a file named <code>app.config</code>, then <code>web.config</code> to use as the configuration file when spawning the new <code>AppDomain</code>.</p>
<p>For the private bin path of the execution <code>AppDomain</code>, Storyteller uses this precedence:</p>
<ol>
<li>If the user uses the <code>st run [path] --build [Debug/Release]</code> or <code>st open [path] --build [Debug/Release]</code> flag, use that build profile</li>
<li>If the folder <code>/bin/Debug</code> exists, use that folder as the private bin path</li>
<li>If the folder <code>/bin/Release</code> exists, use that folder</li>
<li>Use <code>/bin</code></li>
</ol>
<p>My typical workflow with .Net projects is to work locally using the <em>Debug</em> target. Once in a while I may compile to the <em>Release</em> target just to test Nuget publishing locally, but <em>Debug</em> is where most of my work happens. On the build server though, I compile with <em>Release</em> and need Storyteller to execute the specifications using the binaries compiled to the <code>/bin/Release</code> folder. Because most of my work is done with <em>Debug</em>, but an older set of <em>Release</em> build artifacts may be hanging around on the file system, I have changed to precedence to default to <em>Debug</em>.</p>
<h2 id="using-the-command-line-tools">Using the Command Line Tools</h2>
<p>The command line tools (<code>ST.exe</code> in Storyteller 3.0, or <code>dotnet storyteller</code> in 4.0, or <code>StorytellerRunner.exe</code> without the dotnet CLI)
generally follows Unix idioms for command line usage that tools like <code>git</code> or <code>npm</code> use for their command line syntax, so:</p>
<ul>
<li><code>dotnet storyteller</code> exposes multiple commands identified by the second word of the signature, so <code>dotnet storyteller run</code> or <code>dotnet storyteller open</code> are valid commands.</li>
<li>Optional flags are used like: <code>--word [value]</code> or <code>-w [value]</code> as a shorthand</li>
<li>Boolean flags can be used like: <code>--open</code> or <code>-o</code>.</li>
<li>If there are multiple boolean optional flags, the <code>-abc</code> usage is the equivalent to <code>-a -b -c</code></li>
</ul>
<p>You can query the command line usage with the command <code>dotnet storyteller ?</code> or <code>dotnet storyteller help</code> to see all the commands that are available.</p>
<pre>

----------------------------------------------------------------------------------------------------------------------------------

  Available commands:
----------------------------------------------------------------------------------------------------------------------------------

        convert -> Converts the persisted specifications from the 1.0-3.0 Xml format to the 4.0 markdown format
  dump-fixtures -> Exports all of the Fixture definitions to markdown for review or using within the headless mode
         export -> Exports a visualization of all of the specifications to disk
           open -> Opens the specification editor web tool
            run -> Run a suite of StoryTeller tests
----------------------------------------------------------------------------------------------------------------------------------
</pre>
<p>You can also query the exact usage of a single command with the syntax like <code>st ? run</code> to display the usage of the <code>st run</code> command.</p>
<h2 id="how-storyteller-persists-specifications">How Storyteller Persists Specifications</h2>
<p>Storyteller 4.0 introduces a new (hopefully human readable and editable) markdown based persistence mechanism in place of the old Xml format from Storyteller &lt;= 3.0.
See <a href="/documentation/converting">Converting from Storyteller 3.0 to 4.0</a> or <a href="/documentation/language/markdown">Working with the Specification Markdown</a> for more information.</p>
<p>Storyteller 4.0 persists specifications as markdown files in the <code>/Specs</code> folder directly under the root of your Storyteller project, with subfolders to represent the suite structure. Storyteller will create this directory on demand if it does not already exist the first time it needs to persist a new specification or top level suite. Storyteller will happily create this folder for you if it does not already exist.</p>

			      	</div>

			      	<hr />

			      	<nav>
				        <span>
				        	<strong>Previous: </strong><a href="/documentation">Documentation</a>

				        </span>
				        <span class="pull-right">

				        	<strong>Next: </strong><a href="/documentation/converting">Converting from Storyteller 3.0 to 4.0</a>

				        </span>
			      	</nav>

		      </div><!--/right-->
		  	</div><!--/row-->
		</div><!--/container-->

<script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$('#search').keyup(function(e){
  if(e.keyCode == 13) {
    var search = $('#search').val();

    var url = 'https://www.google.com/#q=site:storyteller.github.io ' + search;
    url = encodeURI(url);

    //alert(url);

    window.location.href = url;

    e.stopPropagation();
    if (e.cancelBubble!=null) e.cancelBubble = true;
    return false;
  }



});

</script>
    </body>


    <foot>
        <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type='text/javascript' src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <script type="text/javascript" src="/content/embed.js"></script>
        <script type="text/javascript" src="/content/prism.js"></script>
        <script type="text/javascript" src="/content/sidebar.js"></script>
        <script type="text/javascript" src="/content/affix.js"></script>
    </foot>
</html>
